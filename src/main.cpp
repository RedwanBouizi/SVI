#include <iostream>
#include "plot.h"
#include "surfaceVol.h"

int main() {
    /////////////////////////////////////////////////////////////////////////////
    /////                            Example 1                             //////
    /////////////////////////////////////////////////////////////////////////////
    double t_1 = 0.02;  //5 days
    double t_2 = 0.03;  //7 days
    SVIModel SVI_1(t_1, -0.00287344, 0.0370334, 0.275094, 0.0354611, 0.0842511);
    SVIModel SVI_2(t_2, -0.00163885, 0.0356189, 0.269091, 0.026487, 0.053277);
    std::vector<SVIModel> v_SVI;
    v_SVI.push_back(SVI_1);
    v_SVI.push_back(SVI_2);

//    /////////////////////////////////////////////////////////////////////////////
//    /////                            Example 2                             //////
//    /////////////////////////////////////////////////////////////////////////////
    //SVI construction
//    double t_1 = 0.02;  //5 days
//    double t_2 = 0.04;  //10
//    double t_3 = 0.19;  //2 months
//
//    SVIModel SVI_1(t_1, -0.000372388, 0.0140081, 0.411072, 0.0343291, 0.0398866);
//    SVIModel SVI_2(t_2, -0.000778075, 0.0196557, 0.0445386, 0.0245487, 0.0498929);
//    SVIModel SVI_3(t_3, -0.00124303, 0.0536993, 0.382531, 0.0875041, 0.0490586);
//    std::vector<SVIModel> v_SVI;
//    v_SVI.push_back(SVI_1);
//    v_SVI.push_back(SVI_2);
//    v_SVI.push_back(SVI_3);

//    /////////////////////////////////////////////////////////////////////////////
//    /////                            Example 3                             //////
//    /////////////////////////////////////////////////////////////////////////////
//    double t_1 = 0.082;  //20 days
//    double t_2 = 0.16;
//    double t_3 = 0.26;
//    double t_4 = 0.33;
//    double t_5 = 0.58;
//    SVIModel SVI_1(t_1, 0.027, 0.234, 0.068, 0.100, 0.028);
//    SVIModel SVI_2(t_2, 0.030, 0.125, -1.0, 0.074, 0.050);
//    SVIModel SVI_3(t_3, 0.032, 0.094, -1.0, 0.093, 0.041);
//    std::vector<SVIModel> v_SVI;
//    v_SVI.push_back(SVI_1);
//    v_SVI.push_back(SVI_2);
//    v_SVI.push_back(SVI_3);


    /////////////////////////////////////////////////////////////////////////////
    /////                            Example 4                             //////
    /////////////////////////////////////////////////////////////////////////////

////    double t_1 = 0.0055;
//    double t_2 = 0.10;
//    double t_3 = 0.18;
//    double t_4 = 0.25;
//    double t_5 = 0.50;
//    double t_6 = 0.75;
//    double t_7 = 1.25;
//    double t_8 = 1.75;
//
////    SVIModel SVI_1(t_1, -0.0001449630, 0.009296544, -0.2941176, -0.005427323, 0.01967133);
//    SVIModel SVI_2(t_2, -0.0008321340, 0.024439766, -0.2999753, 0.026483640, 0.06986945);
//    SVIModel SVI_3(t_3, -0.0008676750, 0.028290645, -0.2892204, 0.059270300, 0.08738356);
//    SVIModel SVI_4(t_4, -0.0000591593, 0.033179082, -0.3014043, 0.065254921, 0.08128724);
//    SVIModel SVI_5(t_5, 0.0011431940, 0.046279644, -0.3530782, 0.094200077, 0.10406830);
//    SVIModel SVI_6(t_6, 0.0022640980, 0.056260415, -0.4387409, 0.111123069, 0.13053393);
//    SVIModel SVI_7(t_7, 0.0040335530, 0.073370755, -0.4968970, 0.149660916, 0.17079476);
//    SVIModel SVI_8(t_8, 0.0034526910, 0.091723054, -0.4942213, 0.185412849, 0.22368141);
//
//    std::vector<SVIModel> v_SVI;
////    v_SVI.push_back(SVI_1);
//    v_SVI.push_back(SVI_2);
//    v_SVI.push_back(SVI_3);
//    v_SVI.push_back(SVI_4);
//    v_SVI.push_back(SVI_5);
//    v_SVI.push_back(SVI_6);
//    v_SVI.push_back(SVI_7);
//    v_SVI.push_back(SVI_8);


    /////////////////////////////////////////////////////////////////////////////
    /////                    Building Volatility Surface                   //////
    /////////////////////////////////////////////////////////////////////////////

    //Define and build SurfaceVol object
    unsigned long   Nk = 100;
    unsigned long   Nt = 50;
    double range_k [2] = {-0.05, 0.05};
    double range_t [2] = {0.004, 0.1};//from 1 to 1 month
    SurfaceVol SV(range_k, Nk, range_t, Nt);
    SV.build(v_SVI);

    plotVol2d(SV, v_SVI);
    plotVar2d(SV, v_SVI);
    plotVol3d(SV, v_SVI);
    return 0;
}
